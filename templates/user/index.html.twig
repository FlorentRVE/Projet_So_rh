{% extends 'base.html.twig' %}

{% block title %}Formulaire index{% endblock %}

{% block body %}
    {# ======================== Sidebar ========================== #}
    <sidebar class="bg-cyan-950 fixed left-0 top-0 h-screen rounded-tr-3xl">
        <div class="flex flex-col items-center w-[20vw]">

            {# ===== LOGO ====== #}
            <a href="{{ path('app_accueil') }}">

                <img src="{{ asset('img/logo_clair.png') }}" alt="logo" class="w-[15vw] mt-8">
            <a>

            <div class="flex flex-col items-center gap-3 mt-10 border-t border-slate-600 pt-4 font-semibold text-[1.5vh]">

                <a href="{{ path('app_formulaire_index') }}" class="text-slate-50 text-center hover:bg-sky-800 mb-5 px-2 py-1 rounded-lg w-full">Gestion formulaire</a>
                <a href="{{ path('app_user_index') }}" class="text-slate-50 text-center hover:bg-sky-800 mb-5 px-2 py-1 rounded-lg w-full h-auto">Gestion utilisateurs</a>

                <a href="{{ path('app_logout') }}"  class="flex flex-col text-center transition-all hover:scale-105 p-6 text-slate-50">
                    <p class="font-semibold">Se déconnecter</p>
                    <i class="fa-solid fa-right-to-bracket text-slate-50 text-2xl text-center font-semibold"></i>
                </a>
            </div>
        </div>
    </sidebar>

    {# ==================== Content ======================= #}
    <content>
        <div class="ml-[20vw] bg-sky-200 min-h-screen">

            <div class="flex flex-col p-4 justify-center items-center bg-slate-50">

                <h1 class="text-3xl font-semibold text-center">Administration</h1>

            </div>

            <div class="flex flex-col p-4 mt-4 justify-center items-center">

                <a href="{{ path('app_register') }}" class="text-slate-50 text-xl text-center bg-sky-800 mb-5 px-4 py-3 font-bold rounded-lg w-[90%]">Nouvel utilisateur</a>

                <table class="w-full">
                    <tbody>
                    {% for user in users %}
                        <tr class="border-2 border-slate-900">
                            <td class="border-2 border-slate-900 w-[5%] text-center font-semibold text-2xl {{user.roles|join(', ') is same as 'ROLE_ADMIN, ROLE_USER' ? 'bg-green-600' : 'bg-yellow-200'}}"></td>
                            <td class="border-2 border-slate-900 w-[65%] bg-slate-50 text-center font-semibold text-2xl">{{ user.username }}</td>
                            <td class="border-2 border-slate-900 w-[30%] bg-slate-950">
                                <div class="flex flex-col items-center justify-center p-2 font-semibold">
                                    <a href="{{ path('app_user_edit', {'id': user.id}) }}" class="text-slate-50 text-center bg-sky-800 px-4 py-1 rounded-lg">Gérer l'utilisateur</a>
                                </div>
                            </td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="3">Pas d'utilisateur</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>                
            </div>
        </div>
    </content>
{% endblock %}
